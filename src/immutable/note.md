## 不变性

不可变对象：被创建后，状态就不能被修改。

不可变对象一定是线程安全的。不需要额外的同步开销。



### final关键字

#### 类：不能被继承

#### 方法：不能被重写

- 构造函数不能被final修饰

- 不可被重写（会报错）

- static方法也不可被重写（不会报错，但是是不同方法）

  

#### 变量：不能被修改

- 若是对象类型，仅代表引用不能变，被引用的对象仍然可变。
- 类中的final属性
  - 声明时直接赋值
  - 构造函数中赋值
  - 类的初始代码块中赋值
- 类中static  final属性
  - 声明时直接赋值
  - static静态块中赋值
- 方法中的final变量
  - 不规定赋值时机,只要求在使用前赋值



### 栈封闭--把变量写在线程内部

- 方法里新建的局部变量，存储在线程私有的局部变量表中，不能被其他线程所访问到，不会有线程安全问题。
- 线程封闭技术的一种情况

